# name: auto-release

# on:
#   release:
#     types: [published]

# jobs:
#   updatepackage:
#     runs-on: ubuntu-latest
#     strategy:
#       matrix:
#         node-version: [14.x]
#         # See supported Node.js release schedule at https://nodejs.org/en/about/releases/
#     steps:
#       # ==================================
#       # ==== Checkout the repository  ====
#       # ==================================
#       - uses: actions/checkout@v2
#         with:
#           fetch-depth: 0
#           token: ${{ secrets.PAT_TOKEN }}
#           ref: master

#       # ===========================================
#       # ==== Cache node_modules between builds ====
#       # ===========================================
#       - name: Cache node modules
#         uses: actions/cache@v2
#         env:
#           cache-name: cache-node-modules
#         with:
#           # npm cache files are stored in `~/.npm` on Linux/macOS
#           path: ~/.npm
#           key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}
#           restore-keys: |
#             ${{ runner.os }}-build-${{ env.cache-name }}-
#             ${{ runner.os }}-build-
#             ${{ runner.os }}-

#       # =========================================
#       # ==== We use node 14.x for our builds ====
#       # =========================================
#       - name: Use Node.js ${{ matrix.node-version }}
#         uses: actions/setup-node@v1
#         with:
#           node-version: ${{ matrix.node-version }}
#       - run: npm ci

#       # =========================================
#       # ==== Update version and generate the changelog ====
#       # =========================================
#       - run: |
#           git config --global user.name "GitHub Actions"
#           git config --global user.email "GitHub Actions"
#           git tag -d ${{ github.event.release.tag_name }}
#           npm run release -- --release-as ${{ github.event.release.tag_name }}
#       - name: Push Changes
#         uses: ad-m/github-push-action@master
#         with:
#           github_token: ${{ secrets.PAT_TOKEN }}
#           branch: master
#       - name: Publish npm package
#         run: git push
#     env:
#       ARTIFACTORY_TOKEN: "${{ secrets.CORPDEV_ARTIFACTORY_TOKEN }}"
#       ARTIFACTORY_USERNAME: "${{ secrets.CORPDEV_ARTIFACTORY_USERNAME }}"
#       ARTIFACTORY_PASSWORD: "${{ secrets.CORPDEV_ARTIFACTORY_PASSWORD }}"
